import{c as $,a as p,p as x,i as g,F as L,s as _,u as w,S,t as a,b as C,d as E,e as k,f as H,o as M,g as W}from"./index-6b0922cd.js";const R=a('<section class="w-full h-full bg-primary text-primary p-3 overflow-y-scroll font-mono"><section class="w-full whitespace-pre-wrap"><p>Python (Pyodide 0.22.1) Shell</p><br></section><form action="javascript:void(0)" class="flex"><label class="h-primary text-bold float-left flex-none">&gt;&gt;&gt;&nbsp;</label><input type="text" class="bg-primary text-primary float-left border-b-2 border-white border-solid outline-none flex-1" value=""><input type="submit" class="invisible" value=""></form></section>'),A=a("<p>Loading Pyodide Shell...</p>"),O=a("<p></p>");function V(){let n,i;const[u,t]=$([]);return p(S,{get when(){return!x.loading},get fallback(){return A.cloneNode(!0)},get children(){const l=R.cloneNode(!0),s=l.firstChild;s.firstChild.nextSibling;const d=s.nextSibling,e=d.firstChild,h=e.nextSibling,v=i;typeof v=="function"?w(v,l):i=l,g(s,p(L,{get each(){return u()},children:(c,y)=>(()=>{const r=O.cloneNode(!0);return g(r,c),r})()}),null),d.addEventListener("submit",()=>{switch(n.value){case"exit()":break;case"clear()":t([]);break;default:t([...u(),">>> ".concat(n.value)]);try{x.latest.runPython(n.value);let c=x.latest.runPython("sys.stdout.getvalue()");c!=""&&t([...u(),c])}catch(c){t([...u(),c.message])}x.latest.runPython("sys.stdout = io.StringIO()")}n.value="",i.scrollTop=i.scrollHeight}),_(e,"for",n);const f=n;return typeof f=="function"?w(f,h):n=h,l}})}const G=a('<section class="h-full md:h-1/2 w-full">Components list...</section>'),z=a('<section class="h-full md:h-1/2 w-full dark"></section>');function F(){return[G.cloneNode(!0),(()=>{const n=z.cloneNode(!0);return g(n,p(V,{})),n})()]}var D=(n=>(n[n.VERTICAL=0]="VERTICAL",n[n.HORIZONTAL=1]="HORIZONTAL",n))(D||{});const U=a('<svg class="hover:cursor-grab" shape-rendering="auto"><path></path></svg>'),X=a('<aside class="bg-primary rounded-md p-3 drop-shadow-md text-left z-50"><button class="w-full hover:opacity-80">Delete</button><button class="w-full hover:opacity-80">Rotate</button></aside>');class m{static HEIGHT=4;static WIDTH=2;static _nextId=0;constructor(i){this.sheet=i,[this._value,this._setValue]=$(""),[this._id,this._setId]=$(String(m._nextId++)),[this._color,this._setColor]=$("#252525"),[this._position,this._setPosition]=$([-255,-255]),[this._orientation,this._setOrientation]=$(D.VERTICAL)}forDisplay(){let[i,u]=$(!1),[t,l]=$([0,0]);const s=this;return[(()=>{const o=U.cloneNode(!0),d=o.firstChild;return o.$$click=()=>{s.delete(),s.sheet.activeComponent=s},o.$$contextmenu=e=>{l([e.clientX,e.clientY]),u(!0),e.preventDefault()},C(e=>{const h=s.pixelHeight,v=s.pixelWidth,f=`
                    stroke: ${s.color}; 
                    stroke-width: 1.5; 
                    fill: none;
                    position: absolute;
                    top: ${s.sheet.toPixels(s.position)[1]}px;
                    left: ${s.sheet.toPixels(s.position)[0]}px;
                    rotate: ${90*s.orientation}deg;
                `,c=s.path();return h!==e._v$&&_(o,"height",e._v$=h),v!==e._v$2&&_(o,"width",e._v$2=v),e._v$3=E(o,f,e._v$3),c!==e._v$4&&_(d,"d",e._v$4=c),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),o})(),p(S,{get when(){return i()},get children(){const o=X.cloneNode(!0),d=o.firstChild,e=d.nextSibling;return o.addEventListener("mouseleave",()=>{u(!1)}),d.$$click=()=>{s.delete()},e.$$click=()=>{s.rotate()},C(h=>E(o,`
                        position: absolute;
                        top: ${t()[1]-3}px;
                        left: ${t()[0]-3}px;
                    `,h)),o}})]}forSidebar(){return[]}forLcapy(){return this.name}delete(){this.sheet.deleteComponent(this)}rotate(){this.orientation=(this.orientation+1)%2}get id(){return this._id()}set id(i){this._setId(i)}get value(){return this._value()}set value(i){this._setValue(i)}get color(){return this._color()}set color(i){this._setColor(i)}get position(){return this._position()}set position(i){this._setPosition(i)}get orientation(){return this._orientation()}set orientation(i){this._setOrientation(i)}get pixelHeight(){return this.sheet.gridSpacing*m.HEIGHT}get pixelWidth(){return this.sheet.gridSpacing*m.WIDTH}}k(["contextmenu","click"]);class b extends m{name="R";nodes=[[b.WIDTH/2,0],[b.WIDTH/2,b.HEIGHT]];path(){return`
            M ${this.pixelWidth/2} ,  0
            l   0                  , ${this.pixelHeight/2.75}
            l  20                  ,  5
            l -40                  ,  5
            l  40                  ,  5
            l -40                  ,  5
            l  40                  ,  5
            l -40                  ,  5
            l  20                  ,  5
            L ${this.pixelWidth/2} , ${this.pixelHeight}
        `}}const Y=a('<section class="text-secondary bg-secondary absolute inset-x-0 bottom-0 w-full md:w-2/3 text-center"><button class="px-4 py-2 transition-all hover:bg-primary hover:text-primary mx-2">R</button></section>');function Z(n){const[i,u]=H(n,["sheet"]);let t=i.sheet;return(()=>{const l=Y.cloneNode(!0),s=l.firstChild;return s.$$click=()=>{t.activeComponent=new b(t)},l})()}k(["click"]);const j=a('<section><svg class="h-full w-full"><defs><pattern id="grid" patternUnits="userSpaceOnUse"><path fill="none" stroke="gray" stroke-width="0.5"></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"></rect></svg></section>');function q(n){const[i,u]=H(n,["sheet"]);let t=i.sheet,l;function s(e){t.active&&(t.activeComponent.position=t.toGrid([e.clientX,e.clientY]))}function o(e){t.active&&t.placeActiveComponent()}function d(){t.gridSpacing=l.clientWidth/25}return window.addEventListener("resize",()=>{d()}),M(()=>{d()}),[(()=>{const e=j.cloneNode(!0),h=e.firstChild,v=h.firstChild,f=v.firstChild,c=f.firstChild;e.$$click=o,e.$$mousemove=s;const y=l;return typeof y=="function"?w(y,e):l=e,g(e,p(S,{get when(){return t.active},get children(){return t.activeComponent.forDisplay()}}),null),g(e,p(L,{get each(){return t.components},children:r=>r.forDisplay()}),null),C(r=>{const I=`h-full w-full overflow-scroll ${t.active?"cursor-grabbing":"cursor-auto"}`,T=t.gridSpacing,N=t.gridSpacing,P=`M ${t.gridSpacing} 0 L 0 0 0 ${t.gridSpacing}`;return I!==r._v$&&W(e,r._v$=I),T!==r._v$2&&_(f,"width",r._v$2=T),N!==r._v$3&&_(f,"height",r._v$3=N),P!==r._v$4&&_(c,"d",r._v$4=P),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e})(),p(Z,{sheet:t})]}k(["mousemove","click"]);const B=a('<section class="h-screen w-full md:w-2/3 inline-block align-top"></section>'),J=a('<aside class="h-screen w-full md:w-1/3 inline-block align-top"></aside>');function Q(n){const[i,u]=H(n,["sheet"]);let t=i.sheet;return[(()=>{const l=B.cloneNode(!0);return g(l,p(q,{sheet:t})),l})(),(()=>{const l=J.cloneNode(!0);return g(l,p(F,{})),l})()]}export{Q as default};
